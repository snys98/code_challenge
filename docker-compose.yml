version: '3.7'

services:
  api:
    image: challenge/api:latest
    ports:
      - 3000:3000
    healthcheck:
      test: ["CMD-SHELL", "curl", "-f", "http://localhost:3000"]  
      interval: 10s  
      timeout: 5s  
      retries: 3  
    networks: 
      - dev
  app:
    image: challenge/app:latest
    ports:
      - 4000:4000
    healthcheck:
      test: ["CMD-SHELL", "curl", "-f", "http://localhost:4000"]  
      interval: 10s  
      timeout: 5s  
      retries: 3  
    networks:
      - dev
  scheduler:
    image: challenge/scheduler:latest
    networks:
      - dev

networks: 
    dev:
      external: true  
